#!/usr/bin/env ruby

require 'bundler/setup'
require 'llrb'

JIT = LLRB::JIT
def JIT.iseq(&block)
  klass = Class.new
  klass.send(:define_singleton_method, :test, &block)
  original = klass.method(:test)
  RubyVM::InstructionSequence.of(original).to_a
end

def JIT.dump(&block)
  klass = Class.new
  klass.send(:define_singleton_method, :test, &block)
  preview(klass, :test)
end

require 'pry'
Pry.start
